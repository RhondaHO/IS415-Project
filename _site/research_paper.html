<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nguyen Mai Phuong">
<meta name="author" content="Kwan Kai Xuan Belle">
<meta name="author" content="Rhonda Ho Kah Yee">

<title>G1T7 Project Research Paper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./logo_t.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">About Us</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./content.html">
 <span class="menu-text">Project Deliverable</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./research_paper.html" aria-current="page">
 <span class="menu-text">Research Paper</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/G1T777/IS415-Project"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">G1T7 Project Research Paper</h1>
            <p class="subtitle lead">Enhancing HDB Buyer Decision-making: Spatial Point Pattern Analysis of HDB Locations and Amenities</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Authors</div>
      <div class="quarto-title-meta-contents">
               <p>Nguyen Mai Phuong </p>
               <p>Kwan Kai Xuan Belle </p>
               <p>Rhonda Ho Kah Yee </p>
            </div>
    </div>
      
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">April 16, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#project-motivation" id="toc-project-motivation" class="nav-link" data-scroll-target="#project-motivation">Project Motivation</a></li>
  <li><a href="#project-objectives" id="toc-project-objectives" class="nav-link" data-scroll-target="#project-objectives">Project Objectives</a></li>
  <li><a href="#our-methodology-and-observations" id="toc-our-methodology-and-observations" class="nav-link" data-scroll-target="#our-methodology-and-observations">Our Methodology and Observations</a>
  <ul class="collapse">
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection"><strong>1. Data Collection</strong></a></li>
  <li><a href="#initial-data-pre-processing" id="toc-initial-data-pre-processing" class="nav-link" data-scroll-target="#initial-data-pre-processing"><strong>2. Initial Data Pre-processing</strong></a></li>
  <li><a href="#spatial-point-analysis" id="toc-spatial-point-analysis" class="nav-link" data-scroll-target="#spatial-point-analysis"><strong>3. Spatial Point Analysis</strong></a></li>
  </ul></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review">Literature Review</a></li>
  <li><a href="#application-system-architecture" id="toc-application-system-architecture" class="nav-link" data-scroll-target="#application-system-architecture">Application System Architecture</a></li>
  <li><a href="#application-design-overview" id="toc-application-design-overview" class="nav-link" data-scroll-target="#application-design-overview">Application Design Overview</a></li>
  <li><a href="#future-work" id="toc-future-work" class="nav-link" data-scroll-target="#future-work">Future Work</a></li>
  <li><a href="#timeline" id="toc-timeline" class="nav-link" data-scroll-target="#timeline">Timeline</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="abstract" class="level2">
<h2 class="anchored" data-anchor-id="abstract">Abstract</h2>
<p>This project aims to simplify the process of understanding amenities and facilities in the vicinity of desired HDB locations. The proposed analytical Shiny app utilizes advanced spatial point pattern analysis techniques to provide a customized view of amenities that match HDB buyers’ preferences. The project objectives include visualizing an overview of HDB flats in Singapore along with relevant amenity locations, measuring spatial association and heterogeneity, estimating HDB location intensity, assessing HDB location distribution non-randomness, and analyzing the spatial distribution of HDB flats over a street network. By empowering HDB buyers with a user-friendly application, the project seeks to assist them in making more informed decisions about their purchases and feeling more confident about their selected residence.</p>
</section>
<section id="project-motivation" class="level2">
<h2 class="anchored" data-anchor-id="project-motivation">Project Motivation</h2>
<p>Many prospective HDB buyers face challenges in visualising and understanding the amenities and facilities available in the vicinity of their desired location. They often resort to manual searches on platforms like Google, which can be time-consuming and frustrating. Moreover, current mapping tools do not offer a comprehensive and tailored view of amenities specific to HDBs.</p>
<p>Our motivation is to simplify this process by providing a user-friendly analytical app that enables HDB buyers to view and understand the surrounding amenities easily. Our app utilizes advanced spatial point pattern analysis techniques to visualize the distribution and clustering of amenities relevant to HDB buyers. By providing a customized view of amenities that cater specifically to the needs of HDB buyers, we aim to empower HDB buyers to make more informed decisions about their purchases and feel more confident in their chosen residence.</p>
</section>
<section id="project-objectives" class="level2">
<h2 class="anchored" data-anchor-id="project-objectives">Project Objectives</h2>
<p>The objective of this project is to develop an analytical application that empowers HDB buyers with the following capabilities:</p>
<ol type="1">
<li><p><strong>Visualise an overview of HDB flats in Singapore</strong> along with relevant amenity locations, such as shopping malls, bus stops, etc. that match their preferences.</p></li>
<li><p>Measure the level of spatial association and heterogeneity between HDB locations and surrounding amenities using <strong>Colocation Quotients (CLQs) analysis</strong>.</p></li>
<li><p>Use <strong>Kernel Density Estimation (KDE)</strong> to estimate the intensity of HDB locations in different study areas of Singapore, such as Tampines and Bedok.</p></li>
<li><p>Assess the non-randomness of HDB location distribution in selected study areas, such as Tampines and Bedok, using <strong>F-function and Ripley’s L-function</strong>.</p></li>
<li><p>Apply <strong>Network Constrained Spatial Point Patterns Analysis</strong> to analyze the spatial distribution of HDB flats over a street network.</p></li>
</ol>
<p>By incorporating advanced spatial point pattern analysis techniques, we aim to simplify the process for HDB buyers by providing them with a user-friendly application that visualises amenities and facilities in their desired location. Our objective is to identify significant spatial patterns and trends that can assist buyers in making informed decisions about their HDB flat purchases and feel confident about their selected residence.</p>
</section>
<section id="our-methodology-and-observations" class="level2">
<h2 class="anchored" data-anchor-id="our-methodology-and-observations">Our Methodology and Observations</h2>
<section id="data-collection" class="level3">
<h3 class="anchored" data-anchor-id="data-collection"><strong>1. Data Collection</strong></h3>
<p>In the initial stages of our project, we collected a range of datasets to analyze the spatial point patterns of HDB locations and amenities that we believe would be valuable to HDB buyers. These datasets comprise of various amenities such as MRT stations, bus stops, supermarkets, hawker centres, retail pharmacies, carparks, and more. We acquired some of these datasets online, while others were extracted using OneMap API.</p>
<section id="list-of-datasets-used" class="level4">
<h4 class="anchored" data-anchor-id="list-of-datasets-used">1.1 List of Datasets Used</h4>
<p>Below is a table of the data sets that we will be using for our project.</p>
<table class="table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>File Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HDB Resale Flat Prices</td>
<td>Provides HDB addresses, blocks and street name | <a href="https://data.gov.sg/dataset/resale-flat-prices">Data.gov.sg</a></td>
<td>.csv</td>
</tr>
<tr class="even">
<td>School Directory and Information</td>
<td>Provides a list of primary schools in Singapore | <a href="https://data.gov.sg/dataset/school-directory-and-information">Data.gov.sg</a></td>
<td>.csv</td>
</tr>
<tr class="odd">
<td>Shopping Malls</td>
<td>Provides a list of shopping mall and its geometry in Singapore | Web scrapped shopping mall data in 2019 by <a href="https://github.com/ValaryLim/Mall-Coordinates-Web-Scraper">Valery Lim</a></td>
<td>.csv</td>
</tr>
<tr class="even">
<td>URA Master Plan 2019 Subzone Boundary</td>
<td>Provides region boundary data | Referenced/taken from Prof Kam</td>
<td>shp</td>
</tr>
<tr class="odd">
<td>Bus Stops</td>
<td>Provides a list of bus stops and its geometry in Singapore | <a href="https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=bus%20stop">Datamall LTA</a></td>
<td>.shp</td>
</tr>
<tr class="even">
<td>Train Station</td>
<td>Provides a list of MRT/LTR exits and its geometry in Singapore | <a href="https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=Train">Datamall LTA</a></td>
<td>.shp</td>
</tr>
<tr class="odd">
<td>Supermarkets</td>
<td>Provides a list of supermarkets in Singapore | <a href="https://data.gov.sg/dataset/supermarkets">Data.gov.sg</a></td>
<td>.geojson</td>
</tr>
<tr class="even">
<td>Childcare Centres</td>
<td>Provides a list of names, addresses and relevant information for childcare centres in Singapore | Extracted via onemapAPI <a href="https://www.onemap.gov.sg/docs/">API Docs</a> | <a href="https://www.onemap.gov.sg/docs/#register-free-account">Registration</a></td>
<td>.rds</td>
</tr>
<tr class="odd">
<td>Eldercare Centres</td>
<td>Provides a list of names, addresses and relevant information for eldercare centres in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="even">
<td>Kindergartens</td>
<td>Provides a list of names, addresses and relevant information for kindergartens in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="odd">
<td>Hawker Centres</td>
<td>Provides a list of names, addresses and relevant information for hawker centres in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="even">
<td>Healthier Hawker Centres</td>
<td>Provides a list of names, addresses and relevant information for healthier hawker centres in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="odd">
<td>National Parks</td>
<td>Provides a list of names, addresses and relevant information for national parks in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="even">
<td>Gyms</td>
<td>Provides a list of names, addresses and relevant information for gyms in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="odd">
<td>Retail Pharmacies</td>
<td>Provides a list of names, addresses and relevant information for retail pharmacies in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="even">
<td>Singapore Police Force (SPF) Establishments</td>
<td>Provides a list of names, addresses and relevant information for SPF establishments in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="odd">
<td>Carparks</td>
<td>Provides a list of names, addresses and relevant information for carparks in Singapore | Extracted via onemapAPI</td>
<td>.rds</td>
</tr>
<tr class="even">
<td>Libraries</td>
<td>Provides a list of names, addresses and relevant information for libraries in Singapore | Extracted via onemapAPI | To be used as a sample dataset to test the upload dataset button in our Shiny application</td>
<td>.rds</td>
</tr>
</tbody>
</table>
</section>
<section id="packages-used" class="level4">
<h4 class="anchored" data-anchor-id="packages-used">1.2 Packages Used</h4>
<p>Below is the list of packages we will be using for our project:</p>
<ul>
<li><p><strong>shiny</strong>: to create the Shiny application</p></li>
<li><p><strong>shinyjs</strong>: to perform JavaScript operations on the Shiny application</p></li>
<li><p><strong>shinyWidget</strong>: to customise input widgets on the Shiny application</p></li>
<li><p><strong>leaflet</strong>: to create interactive map on the Shiny application</p></li>
<li><p><strong>bslib</strong>: to create a modern UI interface for the Shiny application using Bootstrap</p></li>
<li><p><strong>rvest</strong>: to parse HTML and XML files</p></li>
<li><p><strong>jsonlite</strong>: to parse and generate JSON files</p></li>
<li><p><strong>dplyr</strong>: to simplify the data manipulation tasks such as filtering rows, selecting columns, grouping and summarizing data, and joining multiple datasets</p></li>
<li><p><strong>sf</strong>: to import and handle geospatial data</p></li>
<li><p><strong>sp</strong>: to import and handle spatial point and lines data frames</p></li>
<li><p><strong>rdgal</strong>: to import geospatial data and store them as sp objects</p></li>
<li><p><strong>readxl</strong>: to read and import excel files</p></li>
<li><p><strong>tidyverse</strong>: to handle data wrangling (tidyr, dplyr, ggplot2, tibble)</p></li>
<li><p><strong>maptools</strong>: to manipulate geographic data</p></li>
<li><p><strong>data.table</strong>: to speed up the modification of data</p></li>
<li><p><strong>httr</strong>: to run API requests (for getting data from onemapsg)</p></li>
<li><p><strong>tmap</strong>: to plot out choropleth maps</p></li>
<li><p><strong>ggplot2</strong>: to create elegant data visualisation for mapping</p></li>
<li><p><strong>ggpubr</strong>: to customise ggplots for better visualisation</p></li>
<li><p><strong>ggthemes</strong>: to add preset themes, geoms and scales for ggplot2</p></li>
<li><p><strong>plotly</strong>: to create interactive web graphics from ggplot2 graphs</p></li>
<li><p><strong>funModeling</strong>: to plot EDA with better visualisation</p></li>
<li><p><strong>raster</strong>: to convert grid output to raster layer for visualisation (Kernel Density Estimation)</p></li>
<li><p><strong>spatstat</strong>: to convert spatial objects to ppp format (Spatial Point Pattern plot)</p></li>
<li><p><strong>olsrr</strong>: to build OLS regression models</p></li>
<li><p><strong>sfdep</strong>: to find contiguous neighbours, calculate weights and perform LISAs (Local Indicator of Spatial Association)</p></li>
<li><p><strong>spNetwork</strong>: to perform spatial analysis on networks. Includes network kernel density estimations as well as K function estimations for point pattern analysis on the network.</p></li>
<li><p><strong>vctrs</strong>: provides a framework for working with vectors and arrays in a consistent and efficient way.<br>
</p></li>
</ul>
</section>
</section>
<section id="initial-data-pre-processing" class="level3">
<h3 class="anchored" data-anchor-id="initial-data-pre-processing"><strong>2. Initial Data Pre-processing</strong></h3>
<p>To optimize the loading speed of the application, we carefully considered the size of the HDB location dataset (i.e HDB Resale Flat Prices), as its large volume may lead to slow loading times. Consequently, we extracted the HDB locations of 5-room flat types over a one-year period from January 2022 to December 2022. We then preprocessed all the datasets by extracting relevant columns, removing missing values, and ensuring that the geometries are valid and have the correct coordinate reference system (CRS) information, specifically EPSG:3414. Afterwards, we carried out our spatial point analysis mentioned under our objectives.</p>
</section>
<section id="spatial-point-analysis" class="level3">
<h3 class="anchored" data-anchor-id="spatial-point-analysis"><strong>3. Spatial Point Analysis</strong></h3>
<section id="measure-the-level-of-spatial-association-and-heterogeneity-between-hdb-locations-and-surrounding-amenities-using-colocation-quotients-clqs-analysis" class="level4">
<h4 class="anchored" data-anchor-id="measure-the-level-of-spatial-association-and-heterogeneity-between-hdb-locations-and-surrounding-amenities-using-colocation-quotients-clqs-analysis"><strong>3.1 Measure the level of spatial association and heterogeneity between HDB locations and surrounding amenities using Colocation Quotients (CLQs) analysis</strong></h4>
<section id="data-preparation" class="level5">
<h5 class="anchored" data-anchor-id="data-preparation">3.1.1 Data Preparation</h5>
<p>Before we can perform CLQ, we need to extract the datasets to contain the type of amenity with its respective geometry without the address names of the amenities. For example, the code chunk below extracts out the geometry of the HDB locations and names it as type “HDB”.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>hdb_a <span class="ot">&lt;-</span> resale_sf <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(geometry) <span class="sc">%&gt;%</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">geometry=</span> geometry,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> <span class="st">"HDB"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="computing-colocation-quotients-clqs" class="level5">
<h5 class="anchored" data-anchor-id="computing-colocation-quotients-clqs">3.1.2 Computing Colocation Quotients (CLQs)</h5>
<p>To streamline the process of computing Colocation Quotients (CLQs) for multiple amenities, a function called cql_func(), which takes in the HDB extracted dataset, a sf dataframe of the amenity that has yet to be extracted and the name of the amenity, was created to extract the relevant datasets, perform the necessary computations, and save the output to an rds file. This enables easy import and visualization of the results in the Shiny app. Below are the steps of the function created:</p>
<ol type="1">
<li><p>Create the extracted dataset for the amenity</p></li>
<li><p>Combine HDB and Amenity dataset into a single dataframe</p></li>
<li><p>Prepare nearest neighbours list by using st_knn() of sfdep package to determine the k (i.e.&nbsp;6) nearest neighbours for given point geometry.</p></li>
<li><p>Compute kernel weights by using st_kernel_weights() of sfdep package to derive a weights list by using a kernel function.</p></li>
<li><p>Prepare a vector list to reference the points data. For example, A list will be the HDB location points and B list will be the location points of another amenity such as Hawker Centres</p></li>
<li><p>Compute the LCLQ values for each point event of HDB points using local_colocation()&nbsp;</p></li>
<li><p>Join the output of local_colocation() to the previous HDB points and amenities data.frame and write it into an rds file</p></li>
</ol>
<p>Below is the code chunk for the function created.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>cql_func <span class="ot">&lt;-</span> <span class="cf">function</span>(df1,df2,nameB){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  df2_b <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(geometry) <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">geometry=</span> geometry,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> nameB) </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  combined <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>(<span class="fu">list</span>(df1, df2_b),<span class="at">use.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  combined_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(combined) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">3414</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  nb <span class="ot">&lt;-</span> <span class="fu">include_self</span>(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_knn</span>(<span class="fu">st_geometry</span>(combined_sf), <span class="dv">6</span>))</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  wt <span class="ot">&lt;-</span> <span class="fu">st_kernel_weights</span>(nb, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                        combined_sf, </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"gaussian"</span>, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">adaptive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  hdb_locations <span class="ot">&lt;-</span> combined_sf <span class="sc">%&gt;%</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"HDB"</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  A <span class="ot">&lt;-</span> hdb_locations<span class="sc">$</span>type</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  df2_locations <span class="ot">&lt;-</span> combined_sf <span class="sc">%&gt;%</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> nameB)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  B <span class="ot">&lt;-</span> df2_locations<span class="sc">$</span>type</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  LCLQ <span class="ot">&lt;-</span> <span class="fu">local_colocation</span>(A, B, wt, nb, <span class="dv">99</span>) <span class="co"># 100 simulations</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  LCLQ_stores <span class="ot">&lt;-</span> <span class="fu">cbind</span>(combined_sf, LCLQ)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(LCLQ_stores, <span class="fu">paste0</span>(<span class="st">"data/rds/clq/hdb_"</span>,nameB,<span class="st">".rds"</span>))</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><br>
When visualizing the results in the Shiny app, I filtered the data to display only the p-values that are less than 0.05. This allows users to easily identify the significant associations between HDB locations and amenities. The code chunk can be referred to below.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a> clq_map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(mpsz_sf) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tm_shape</span>(result, <span class="at">subset =</span> result<span class="sc">$</span>amenity_pvalue <span class="sc">&lt;</span> <span class="fl">0.05</span>) <span class="sc">+</span> <span class="co">#filter out p_value less than 0.05 </span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tm_dots</span>(<span class="at">col =</span> amenity_name,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">0.01</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">border.lwd =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tm_view</span>(<span class="at">set.zoom.limits =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">14</span>))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>clq_outputmap <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>(<span class="fu">tmap_leaflet</span>(clq_map))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="observations" class="level5">
<h5 class="anchored" data-anchor-id="observations">3.1.3 Observations</h5>
<p>By looking at the LCLQ map for HDB locations and Hawker centres below, we can observe that there are not many missing values and the local colocation quotient of 0.992. This informs users that the points are isolated but significant as the local colocation quotient is less than 1 with a p-value less than 0.05. The information provided about the LCLQ map for HDB locations and Hawker centres can be useful for HDB buyers in several ways. Firstly, it suggests that there is a high likelihood that HDB flats in the area are located near hawker centres. This can be important for buyers who prioritise having access to food options and dining facilities nearby. Secondly, the fact that the local colocation quotient is close to 1 and the p-value is less than 0.05 indicates that the spatial relationship between HDB locations and hawker centres is not likely to have occurred by chance. This could be interpreted as evidence of intentional planning or zoning by the authorities, which may indicate the area has been designed to meet the needs of residents.<br>
</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="img/clq_hawker.PNG" class="img-fluid figure-img" width="552"></p>
<p></p><figcaption class="figure-caption">Figure 1: CLQ Map of Hawker Centres in relation to HDB</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="use-kernel-density-estimation-kde-to-estimate-the-intensity-of-hdb-locations-in-different-study-areas-of-singapore-such-as-tampines-and-bedok" class="level4">
<h4 class="anchored" data-anchor-id="use-kernel-density-estimation-kde-to-estimate-the-intensity-of-hdb-locations-in-different-study-areas-of-singapore-such-as-tampines-and-bedok"><strong>3.2</strong> Use Kernel Density Estimation (KDE) to estimate the intensity of HDB locations in different study areas of Singapore, such as Tampines and Bedok</h4>
<section id="data-preparation-1" class="level5">
<h5 class="anchored" data-anchor-id="data-preparation-1">3.2.1 Data Preparation</h5>
<p>Before we can perform KDE, we need to first ensure that our sf dataframes for all the amenities type are converted into sp’s Spatial* class, then converted to the Spatial* class into generic sp format, then converted into spatstat’s ppp format and finally converted into an owin object. The code chunk below is an example of us converting the subzone and HDB dataset into an owin object.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">as_Spatial</span>(mpsz_sf)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>mpsz_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(mpsz, <span class="st">"SpatialPolygons"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>mpsz_owin <span class="ot">&lt;-</span> <span class="fu">as</span>(mpsz_sp, <span class="st">"owin"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>resale <span class="ot">&lt;-</span> <span class="fu">as_Spatial</span>(resale_sf)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>resale_sp <span class="ot">&lt;-</span> <span class="fu">as</span>(resale, <span class="st">"SpatialPoints"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>resale_ppp <span class="ot">&lt;-</span> <span class="fu">as</span>(resale_sp, <span class="st">"ppp"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>resaleSG_ppp <span class="ot">=</span> resale_ppp[mpsz_owin]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>But before we converted it into an owin, we also made sure to check for any duplicated values and dealt with it by implementing the jittering approach, which adds a small perturbation to the duplicate points so that they do not occupy the exact same space.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">duplicated</span>(resale_ppp))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">multiplicity</span>(resale_ppp)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">multiplicity</span>(resale_ppp) <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>resale_ppp_jit <span class="ot">&lt;-</span> <span class="fu">rjitter</span>(resale_ppp, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">retry=</span><span class="cn">TRUE</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nsim=</span><span class="dv">1</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                             <span class="at">drop=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>From there onwards, we rescaled the unit of measurement from metre to kilometre using the rescale() function and saved the file into an rds file so we can visualise it in our application. The code chunk below shows an example of us rescaling the spf, mrt, gyms and HDB datasets and writing it into an rds file.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>spfSG_ppp.km <span class="ot">&lt;-</span> <span class="fu">rescale</span>(spfSG_ppp, <span class="dv">1000</span>, <span class="st">"km"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>mrtSG_ppp.km <span class="ot">&lt;-</span> <span class="fu">rescale</span>(mrtSG_ppp, <span class="dv">1000</span>, <span class="st">"km"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>gymsSG_ppp.km <span class="ot">&lt;-</span> <span class="fu">rescale</span>(gymsSG_ppp, <span class="dv">1000</span>, <span class="st">"km"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>resaleSG_ppp.km <span class="ot">&lt;-</span> <span class="fu">rescale</span>(resaleSG_ppp, <span class="dv">1000</span>, <span class="st">"km"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(spfSG_ppp.km, <span class="st">"data/rds/kde/spfSG_ppp.km.rds"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(mrtSG_ppp.km, <span class="st">"data/rds/kde/mrtSG_ppp.km.rds"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(gymsSG_ppp.km, <span class="st">"data/rds/kde/gymsSG_ppp.km.rds"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(resaleSG_ppp.km, <span class="st">"data/rds/kde/hdbSG_ppp.km.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="computing-kernel-density-estimation-kde" class="level5">
<h5 class="anchored" data-anchor-id="computing-kernel-density-estimation-kde">3.2.2 Computing Kernel Density Estimation (KDE)</h5>
<p>The following steps are taken to compute the KDE:</p>
<ol type="1">
<li><p>Read the rds file of the amenity chosen by user</p></li>
<li><p>Compute the KDE based on the bandwidth and kernel type selected by the user</p></li>
<li><p>Render the KDE plot in the application</p></li>
</ol>
<p>The code chunk below shows how we can compute and plot the KDE.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>index_kde <span class="ot">&lt;-</span> <span class="fu">match</span>(input<span class="sc">$</span>kde_amenity, <span class="fu">names</span>(kde_files))</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    kde_name <span class="ot">&lt;-</span> kde_files[index_kde]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    kde_rds <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">paste0</span>(<span class="st">"data/rds/kde/"</span>,kde_name,<span class="st">".rds"</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate kernel density estimate</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>kde_result <span class="ot">&lt;-</span> <span class="fu">density</span>(kde_rds, </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">sigma =</span> <span class="fu">get</span>(input<span class="sc">$</span>kde_bw), </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">edge =</span> <span class="cn">TRUE</span>, </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">kernel =</span> input<span class="sc">$</span>kde_kernel)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Render plot</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>kde_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plot</span>(kde_result) </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Based on the KDE plot, users will be able to identify high or low concentrations of the amenity type. The lighter the color of the cluster, the higher concentration of the amenity type.</p>
</section>
<section id="observations-1" class="level5">
<h5 class="anchored" data-anchor-id="observations-1">3.2.3 Observations</h5>
<p>Based on the graph below, we used the spatstat package’s density() function and the Gaussian kernel with the bw.diggle() automatic bandwidth selection method to generate a kernel density estimation (KDE) plot for HDB flats. Specifically, we observed a higher concentration of HDB flats in the northeast side of Singapore compared to other regions. This information may be useful for potential buyers who prefer to live in areas with fewer HDB flats to avoid the northeast side of Singapore and focus their property search on other regions.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/bwdiggle.PNG" class="img-fluid figure-img" width="468"></p>
<p></p><figcaption class="figure-caption">Figure 2: KDE(bw.diggle(), Gaussian kernel) Map of HDB flats</figcaption><p></p>
</figure>
</div>
<p>In our application, we also allow users to select the bandwidth type and kernel used to compute the KDE. This allows them to customise the type of KDE graph they would like to view.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/bwscott.PNG" class="img-fluid figure-img" width="538"></p>
<p></p><figcaption class="figure-caption">Figure 3: KDE(bw.scott(), Quartic kernel) Map of HDB flats</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="assess-the-non-randomness-of-hdb-location-distribution-in-selected-study-areas-such-as-tampines-and-bedok-using-f-function-and-ripleys-l-function." class="level4">
<h4 class="anchored" data-anchor-id="assess-the-non-randomness-of-hdb-location-distribution-in-selected-study-areas-such-as-tampines-and-bedok-using-f-function-and-ripleys-l-function."><strong>3.3 Assess the non-randomness of HDB location distribution in selected study areas, such as Tampines and Bedok, using F-function and Ripley’s L-function.</strong></h4>
<section id="data-preparation-2" class="level5">
<h5 class="anchored" data-anchor-id="data-preparation-2">3.3.1 Data Preparation</h5>
<p>For the F-function and Ripley’s L-function, we are able to reuse the rds files for the HDB locations and subzone dataset that we have prepared for the KDE. The only difference is that we will be extracting HDB locations that are within a specific area such as Bedok, Tampines, etc. The code chunk below is an example of extracting HDB locations that are within Bedok.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>bedok <span class="ot">=</span> mpsz[mpsz<span class="sc">@</span>data<span class="sc">$</span>PLN_AREA_N <span class="sc">==</span> input<span class="sc">$</span>ffunc,]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    bedok_sp <span class="ot">=</span> <span class="fu">as</span>(bedok, <span class="st">"SpatialPolygons"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    bedok_owin <span class="ot">=</span> <span class="fu">as</span>(bedok_sp, <span class="st">"owin"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    resale_bedok_ppp <span class="ot">=</span> resale_ppp_jit[bedok_owin]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="computing-f-function-and-ripleys-l-function" class="level5">
<h5 class="anchored" data-anchor-id="computing-f-function-and-ripleys-l-function">3.3.2 Computing F-function and Ripley’s L-function</h5>
<p>Next, we can compute an estimation of the F-function and L-function, perform a complete spatial randomness(CSR) test, where the null hypothesis is that the distribution of HDB locations in the user’s chosen area is random, and the alternative hypothesis is that the distribution of HDB locations in the user’s chosen area is non-random and plot the F-function and L-function graph to visualize the results of the analysis.</p>
<p>The following code chunk demonstrates how we computed the estimation of the F-function and L-function. Since the F-function and L-function is based on a simulation, we set the random seed to 123 to ensure the reproducibility of the analysis. Additionally, we perform a test at a significance level of 0.05, so the value of alpha will be 0.05 and nsim(the number of simulated point patterns to be generated when computing the envelope.) will be 39.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>F_bedok.csr <span class="ot">&lt;-</span> <span class="fu">envelope</span>(resale_bedok_ppp, Fest, <span class="at">nsim =</span> <span class="dv">39</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>L_bedok.csr <span class="ot">&lt;-</span> <span class="fu">envelope</span>(resale_bedok_ppp, Lest, <span class="at">nsim =</span> <span class="dv">39</span>, <span class="at">rank =</span> <span class="dv">1</span>, <span class="at">glocal=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>With regards to the L-function, it is an interactive map where we referenced the code from our senior, <a href="https://rpubs.com/deniseadele/secondorder_pointpattern">Denise Adele Chua</a>.</p>
<p>Based on the resulting plots, users will be able to observe the F-function or L-function (a solid black line) and the envelope (shaded area), which represents the range of values that would be expected under CSR test. If the observed F-function or L-function lies outside the envelope, it suggests that the data depart significantly from the CSR test, indicating either clustering or regularity in the point pattern. If the observed F-function or L-function lies inside the envelope, it suggests that the data are consistent with CSR, meaning that the pattern of the point locations is random, and no significant spatial clustering or regularity is present in the data.</p>
</section>
<section id="observations-2" class="level5">
<h5 class="anchored" data-anchor-id="observations-2">3.3.3 Observations</h5>
<p>Below is an example of the F-function graph of the Bedok area. We can observed that the F-function and L-function lies outside the envelope, this suggests that the HDB data depart significantly from CSR test.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/ffunc.PNG" class="img-fluid figure-img" width="544"></p>
<p></p><figcaption class="figure-caption">Figure 4: F-function graph for HDB flats in Bedok</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/lfunct.PNG" class="img-fluid figure-img" width="522"></p>
<p></p><figcaption class="figure-caption">Figure 5: L-function graph for HDB flats in Bedok</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="apply-network-constrained-spatial-point-patterns-analysis-to-analyse-the-spatial-distribution-of-hdb-flats-over-a-street-network." class="level4">
<h4 class="anchored" data-anchor-id="apply-network-constrained-spatial-point-patterns-analysis-to-analyse-the-spatial-distribution-of-hdb-flats-over-a-street-network."><strong>3.4 Apply Network Constrained Spatial Point Patterns Analysis to analyse the spatial distribution of HDB flats over a street network.</strong></h4>
<p>Lastly, we conducted a network constrained spatial point pattern analysis on our datasets, using the package spNetwork. We performed a network KDE as well as the K-Function analysis.</p>
<section id="data-preparation-3" class="level5">
<h5 class="anchored" data-anchor-id="data-preparation-3">3.4.1 Data Preparation</h5>
<p>First, we split all our data sets by the planning area (“PLN_AREA_N”). This included the HDB points, facilities points, mpsz as well as the road network. There are only 30 planning areas that contain HDB points, we will only be using these 30 areas.</p>
<section id="splitting-mpsz" class="level6">
<h6 class="anchored" data-anchor-id="splitting-mpsz"><strong>3.4.1.1 Splitting mpsz</strong></h6>
<p>We split the multipolygon shapefile mpsz_sf into smaller subsets by the PLN_AREA_N (planning area name). We then saved each subset named “shape_PLN_AREA_N.rds” according to the planning area.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># splitting mpsz by PLN_AREA_N</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> <span class="fu">unique</span>(mpsz_sf<span class="sc">$</span>PLN_AREA_N)) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter the polygons data frame to get only the polygons for the current area</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  area_polygons <span class="ot">&lt;-</span> mpsz_sf <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(PLN_AREA_N <span class="sc">==</span> x) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>() <span class="co"># convert to sf object if necessary</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace spaces with underscores in the area name</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  area_name_underscore <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, x)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># construct the name of the output file</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  output_filename <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"shape_"</span>, area_name_underscore, <span class="st">".rds"</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># save the area polygons as an RDS file</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(area_polygons, <span class="at">file =</span> output_filename)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="splitting-road-networks" class="level6">
<h6 class="anchored" data-anchor-id="splitting-road-networks"><strong>3.4.1.2 Splitting Road Networks</strong></h6>
<p>Next, we split the road networks based on the intersection of the road networks and the planning areas. We used the st_intersection() function and then saved each intersection as an rds file named “network_PLN_AREA_N.rds” according to the planning area.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>grouped_polygons <span class="ot">&lt;-</span> mpsz_sf <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PLN_AREA_N) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">geometry =</span> <span class="fu">st_combine</span>(geometry)) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>intersected <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(road_network_lines, grouped_polygons)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (PLN_AREA_N <span class="cf">in</span> <span class="fu">unique</span>(intersected<span class="sc">$</span>PLN_AREA_N)) {</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  filtered <span class="ot">&lt;-</span> intersected[intersected<span class="sc">$</span>PLN_AREA_N <span class="sc">==</span> PLN_AREA_N,]</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(filtered, <span class="fu">paste0</span>(<span class="st">"data/geospatial/network/network_"</span>, PLN_AREA_N, <span class="st">".rds"</span>))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="splitting-and-combining-hdb-and-facility-points" class="level6">
<h6 class="anchored" data-anchor-id="splitting-and-combining-hdb-and-facility-points"><strong>3.4.1.3 Splitting and Combining HDB and Facility Points</strong></h6>
<p>Looping through the planning areas, we first find the HDB spatial points and facility spatial points respectively in each planning area of the mpsz multipolygon using the st_intersection() function. We selected the geometry column and added a column “Point Type” labelling each row as either “HDB” or “Facility Name”. We combined the HDB and facility spatial points into a list then wrote it as a rds file named “hdb_facility_PLN_AREA_N.rds” for easy future importation.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialise an empty list to store the output dataframes</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>output_dfs <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># loop over the unique area_names for each multipolygon</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> <span class="fu">unique</span>(mpsz_sf<span class="sc">$</span>PLN_AREA_N)) {</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># subset the multipolygon dataframe by area_name</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  area_multipolygons <span class="ot">&lt;-</span> mpsz_sf[mpsz_sf<span class="sc">$</span>PLN_AREA_N <span class="sc">==</span> x,]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># perform a spatial join between the points1 and area_multipolygons dataframes</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  points1_in_polygons <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(hdb_points, area_multipolygons)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  points1_in_polygons <span class="ot">&lt;-</span> points1_in_polygons <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"geometry"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Point Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"HDB"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(<span class="st">`</span><span class="at">Point Type</span><span class="st">`</span>, <span class="at">.before =</span> <span class="dv">1</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># perform a spatial join between the facility points and area_multipolygons dataframes</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  points2_in_polygons <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(facility_sf, area_multipolygons)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  points2_in_polygons <span class="ot">&lt;-</span> points2_in_polygons <span class="sc">%&gt;%</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"geometry"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Point Type</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Facility Name"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(<span class="st">`</span><span class="at">Point Type</span><span class="st">`</span>, <span class="at">.before =</span> <span class="dv">1</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a unique name for the output dataframe</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  output_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"hdb_facility_"</span>, <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, x))</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># store the output data frames in the output_dfs list</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  output_dfs[[output_name]] <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(points1_in_polygons, points2_in_polygons)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co"># write the output data frames to RDS files</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(output_dfs)) {</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>  filename <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">names</span>(output_dfs)[i]) <span class="co"># replace spaces with underscore</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(output_dfs[[i]], <span class="fu">paste0</span>(filename, <span class="st">".rds"</span>)) <span class="co"># save each data frame as an RDS file</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="netkde-analysis" class="level5">
<h5 class="anchored" data-anchor-id="netkde-analysis">3.4.2 NetKDE Analysis</h5>
<p>In earlier steps while splitting the HDB spatial points by the planning area, we realised that out of the 55 planning areas, only 30 planning areas include HDB spatial points. The area names are as shown below:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># area names</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>area_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"MARINE PARADE"</span>, <span class="st">"BUKIT MERAH"</span>, <span class="st">"QUEENSTOWN"</span>,<span class="st">"OUTRAM"</span>, <span class="st">"ROCHOR"</span>, <span class="st">"KALLANG"</span>,<span class="st">"TANGLIN"</span>, <span class="st">"CLEMENTI"</span>, <span class="st">"BEDOK"</span>, <span class="st">"JURONG EAST"</span>, <span class="st">"GEYLANG"</span>, <span class="st">"BUKIT TIMAH"</span>,<span class="st">"NOVENA"</span>, <span class="st">"TOA PAYOH"</span>,<span class="st">"TUAS"</span>, <span class="st">"JURONG WEST"</span>,<span class="st">"SERANGOON"</span>, <span class="st">"BISHAN"</span>,<span class="st">"TAMPINES"</span>, <span class="st">"BUKIT BATOK"</span>,<span class="st">"HOUGANG"</span>, <span class="st">"ANG MO KIO"</span>,<span class="st">"PASIR RIS"</span>, <span class="st">"BUKIT PANJANG"</span>, <span class="st">"YISHUN"</span>, <span class="st">"PUNGGOL"</span>,<span class="st">"CHOA CHU KANG"</span>, <span class="st">"SENGKANG"</span>,<span class="st">"SEMBAWANG"</span>, <span class="st">"WOODLANDS"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>area_names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, area_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="performing-the-analysis" class="level6">
<h6 class="anchored" data-anchor-id="performing-the-analysis">3.4.2.1 Performing the Analysis</h6>
<p>Since our main focus is on HDB points, we will only cover these 30 planning areas moving forward for the analysis. We took reference to “R for Geospatial Data Science and Analytics” to perform the NetKDE analysis below.</p>
<p>Since there are a lot of points and networks to run through the analysis, running it on loop will result in the immediate crashing of RStudio. Thus we had to go through each planning area and facility manually by editing the facility and area name ‘n’ below.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"data/rds/lixel/facility"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get data</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>area_name <span class="ot">&lt;-</span> area_names[n]</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>hdb_facility <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"hdb_facility_"</span>, area_name))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>hdb_facility_points <span class="ot">&lt;-</span> hdb_facility <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"geometry"</span>))</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>area_network <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"network_"</span>, area_name))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># prepare lixel objects</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>lixels <span class="ot">&lt;-</span> <span class="fu">lixelize_lines</span>(area_network, <span class="dv">700</span>, <span class="at">mindist =</span> <span class="dv">350</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># generate line centre points</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> <span class="fu">lines_center</span>(lixels)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># performing NetKDE</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>densities <span class="ot">&lt;-</span> <span class="fu">nkde</span>(area_network,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">events =</span> hdb_facility_points,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">w =</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="fu">nrow</span>(hdb_facility_points)),</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">samples =</span> samples,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">kernel_name =</span> <span class="st">"quartic"</span>,</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bw =</span> <span class="dv">100</span>, </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">div=</span> <span class="st">"bw"</span>, </span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"simple"</span>, </span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">digits =</span> <span class="dv">1</span>, </span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">tol =</span> <span class="dv">1</span>,</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">grid_shape =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), </span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max_depth =</span> <span class="dv">8</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>                  <span class="at">agg =</span> <span class="dv">5</span>, </span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>                  <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co"># add densities to samples and lixels</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>samples<span class="sc">$</span>density <span class="ot">&lt;-</span> densities</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>lixels<span class="sc">$</span>density <span class="ot">&lt;-</span> densities</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co"># rescale densities to help with mapping</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>samples<span class="sc">$</span>density <span class="ot">&lt;-</span> samples<span class="sc">$</span>density <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>lixels<span class="sc">$</span>density <span class="ot">&lt;-</span> lixels<span class="sc">$</span>density <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="co"># save lixel as RDS with unique name</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>lixel_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"lixel_facility_"</span>, area_name, <span class="st">".rds"</span>)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(lixels, lixel_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We saved each lixel as “lixel_facility_area_name.rds” according to the facility and area names.</p>
</section>
<section id="plotting-out-lixels" class="level6">
<h6 class="anchored" data-anchor-id="plotting-out-lixels">3.4.2.2 Plotting out Lixels</h6>
<p>Using the code below, we plotted out the road network density using the lixel generated earlier. We then plotted the HDB and facility points, colour-coding the points for easier visualisation.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">'view'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(shape_area_name) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lixel_facility_area_name)<span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col=</span><span class="st">"density"</span>, <span class="at">lwd=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(hdb_facility_area_name)<span class="sc">+</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">"Point Type"</span>, <span class="at">palette=</span><span class="fu">c</span>(<span class="st">'blue'</span>, <span class="st">'red'</span>)) <span class="sc">+</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_view</span>(<span class="at">set.zoom.limits =</span> <span class="fu">c</span>(<span class="dv">14</span>,<span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="observations-3" class="level6">
<h6 class="anchored" data-anchor-id="observations-3">3.4.2.3 Observations</h6>
<p>One thing we can observe is the stark difference between the ratio of the number of HDB points to the facility points. Since we have done our analysis based on the planning area, the number of HDB and facility points per planning area is rather small. Thus, the small change in number of facility points and their geometry location greatly affects the density results of our network KDE analysis.</p>
<p>Our analysis showed that Punggol and Sembawang have the highest network density, followed by Choa Chu Kang, Bukit Batok, and Yishun. These regions are located in the north(-east) and west of Singapore. Conversely, the least dense network was observed in Tuas, which had only three HDB points. Overall, this information can be valuable for potential HDB buyers looking to make informed decisions based on their preferences and needs.</p>
<p>However that being said, areas with little to no facility points gave us less insightful results as it is basically a network KDE analysis on the HDB points itself rather than that of both HDB and facility points. This is a rather recurring observation thus we decided to focus just on the HDB points without the facilities for the next test, K-function.</p>
</section>
</section>
<section id="k-function-analysis" class="level5">
<h5 class="anchored" data-anchor-id="k-function-analysis">3.4.3 K-Function Analysis</h5>
<section id="performing-k-function" class="level6">
<h6 class="anchored" data-anchor-id="performing-k-function">3.4.3.1 Performing K-Function</h6>
<p>Similarly, with reference to “R for Geospatial Data Science and Analytics”, we performed the K-function test for each planning area individually by changing the n for “area_names” as shown below.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set directory to save kfunc files</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"data/rds/kfunc"</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># get data</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>area_name <span class="ot">&lt;-</span> area_names[n]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>hdb_facility <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"point_"</span>, area_name))</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>hdb_facility_points <span class="ot">&lt;-</span> hdb_facility <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"geometry"</span>))</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>area_network <span class="ot">&lt;-</span> <span class="fu">get</span>(<span class="fu">paste0</span>(<span class="st">"network_"</span>, area_name))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># kfunc</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>kfun <span class="ot">&lt;-</span> <span class="fu">kfunctions</span>(area_network, </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>                             hdb_facility_points,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">start =</span> <span class="dv">0</span>, </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>                             <span class="at">end =</span> <span class="dv">1000</span>, </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>                             <span class="at">step =</span> <span class="dv">50</span>, </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">width =</span> <span class="dv">50</span>, </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nsim =</span> <span class="dv">50</span>, </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>                             <span class="at">resolution =</span> <span class="dv">50</span>,</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">verbose =</span> <span class="cn">FALSE</span>, </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>                             <span class="at">conf_int =</span> <span class="fl">0.05</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="co"># save kfunc as RDS with unique name</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>kfunc_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"kfunc_"</span>, area_name, <span class="st">".rds"</span>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(kfun, kfunc_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="plotting-k-function" class="level6">
<h6 class="anchored" data-anchor-id="plotting-k-function"><strong>3.4.3.2 Plotting K-Function</strong></h6>
<p>The code below plots the K-function graph.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>kfunc_area_name<span class="sc">$</span>plotk</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="section" class="level5">
<h5 class="anchored" data-anchor-id="section"></h5>
</section>
<section id="problems-faced" class="level5">
<h5 class="anchored" data-anchor-id="problems-faced">3.4.4 Problems Faced</h5>
<p>Another reason why we chose to only do the K-function analysis for HDB points rather than both HDB and facility points is because of the huge file size of each rds file saved. After completing the K-Function analysis for 12 facility points for 30 planning areas, we ended up with a total of 8.51GB for file size. We also contemplated if we wanted to save each K-function as a photo instead but loading over 360 photos together with other files we have into our shiny app would take too much time. Lastly, we also had the option to just load the K-function on the Shiny app itself but this can also take up a lot of time depending on the planning area. After deploying the application, we realised that pushing even just the 30 rds files of around 1 GB was too much for the Shiny application to run. Thus,we ended up keeping the 30 K-function analysis pictures that included only HDB points at 30 planning areas.</p>
</section>
<section id="observations-4" class="level5">
<h5 class="anchored" data-anchor-id="observations-4">3.4.5 Observations</h5>
<p>We wanted to focus on the planning areas that we observed were the most and least dense as found out at the NetKDE analysis earlier. The blue line represents the empirical network K-function of the HDB points in the respective planning areas. The grey area represents the results of the 50 simulations in the interval 2.5% - 97.5% .</p>
<ol type="1">
<li><p>Punggol:<br>
The blue line is a lot higher than the grey area throughout the whole distance (0 to 1000m). Thus, we can interpret that the HDB points are more clustered than what is expected from a random distribution.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/pungol.PNG" class="img-fluid figure-img" width="637"></p>
<p></p><figcaption class="figure-caption">Figure 6: NetKDE K-function of the HDB points in Punggol</figcaption><p></p>
</figure>
</div></li>
<li><p>Sembawang:<br>
The blue line is a lot higher than the grey area from around 100m to 600m. Thus, we can interpret that the HDB points are more clustered at that distance than what is expected from a random distribution.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/sembawang.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 7: NetKDE K-function of the HDB points in Sembawang</figcaption><p></p>
</figure>
</div>
<ol start="3" type="1">
<li>Tuas:<br>
The blue line is at 0 across the whole distance and there is no grey area. This is in line with the network KDE analysis performed earlier. The HDB points are not clustered because there are only 3 points in such a huge area.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/tuas.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 8: NetKDE K-function of the HDB points in Tuas</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="general-problems-faced" class="level4">
<h4 class="anchored" data-anchor-id="general-problems-faced">3.5 General Problems Faced</h4>
<p>When we deployed our Shiny app, we realized that it was using too much memory, which caused performance issues. As a result, we had to find a solution that would allow us to display the images in the app without actually computing them in real-time. To achieve this, we had to generate the images beforehand and then render them in the app.</p>
<p>For example, in the case of the CLQ map, we had to modify our code to generate the plot as an image file and save it to disk. Then, we used the renderImage() function in Shiny to display the image in the app. This approach helped us reduce the memory usage of the app and improve its performance.</p>
<p>Here’s an example of the modified code:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>clq_outputmap <span class="ot">&lt;-</span> <span class="fu">renderImage</span>({</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    filename <span class="ot">&lt;-</span> <span class="fu">normalizePath</span>(<span class="fu">file.path</span>(<span class="st">'./images'</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">paste</span>(input<span class="sc">$</span>clq_amenities, <span class="st">'.PNG'</span>, <span class="at">sep=</span><span class="st">''</span>)))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return a list containing the filename and alt text</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">src =</span> filename, </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="st">"80%"</span>, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">height =</span> <span class="st">"auto"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>      }, <span class="at">deleteFile =</span> <span class="cn">FALSE</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
</section>
<section id="literature-review" class="level2">
<h2 class="anchored" data-anchor-id="literature-review">Literature Review</h2>
<section id="mephas-an-interactive-graphical-user-interface-for-medical-and-pharmaceutical-statistical-analysis-with-r-and-shiny-zhou-et-al-2020" class="level4">
<h4 class="anchored" data-anchor-id="mephas-an-interactive-graphical-user-interface-for-medical-and-pharmaceutical-statistical-analysis-with-r-and-shiny-zhou-et-al-2020">1. MEPHAS: an interactive graphical user interface for medical and pharmaceutical statistical analysis with R and Shiny (<a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-020-3494-x">Zhou et al, 2020</a>)</h4>
<p>This article highlights that the MEPHAS tool has been designed to support various statistical analyses, including probability, hypothesis testing, regression modeling, and dimensional analysis. Each design interface contains multiple tabs for different analysis methods, an input panel on the left, and an output panel on the right. MEPHAS also allows for data input, parameter configuration, and result output.</p>
<section id="how-does-it-link-to-our-project" class="level5">
<h5 class="anchored" data-anchor-id="how-does-it-link-to-our-project">How does it link to our project?</h5>
<p>We plan to follow and utilise a similar design of the MEPHAS tool, making it a useful template for structuring our HDB app. We will be including navigation bar/tab panels to allow users to switch between the different spatial point analysis tools and implementing a side panel to allow users customize the visualizations and a main panel to generate the graph outputs.</p>
</section>
</section>
<section id="analysing-the-global-and-local-spatial-associations-of-medical-resources-across-wuhan-city-using-poi-data-chen-q-et-al.-2023" class="level4">
<h4 class="anchored" data-anchor-id="analysing-the-global-and-local-spatial-associations-of-medical-resources-across-wuhan-city-using-poi-data-chen-q-et-al.-2023">2. Analysing the global and local spatial associations of medical resources across Wuhan city using POI data <a href="https://link.springer.com/article/10.1186/s12913-023-09051-0">(Chen, Q et al., 2023)</a></h4>
<p>This article highlights the issue of imbalance in the supply and demand of medical resources in provincial capitals of China and emphasises the need to understand the spatial patterns of medical resources to ensure fair and optimal allocation of limited resources. This article utilises the Localised Colocation Quotient (LCLQ) analysis, which is a technique that measures directional spatial associations and heterogeneity between categorical point data. By employing this method and utilising point of interest (POI) data, the study presents a unique analysis of the spatial patterns and directional spatial associations between six medical resources in Wuhan city.</p>
<section id="how-does-it-link-to-our-project-1" class="level5">
<h5 class="anchored" data-anchor-id="how-does-it-link-to-our-project-1">How does it link to our project?</h5>
<p>For our project, we need to first define the two types of features of interest which will be HDB locations and the presence of certain amenities. Some examples are schools, carparks, shopping centres and MRT stations. By comparing the observed and expected frequencies of co-occurrence using the LCLQ, we can determine whether HDB locations and surrounding amenities are spatially associated in a non-random way. This can provide insights into the degree to which the availability of amenities in an area affects HDB locations, and vice versa.</p>
</section>
</section>
<section id="measuring-spatial-patterns-of-health-care-facilities-and-their-relationships-with-hypertension-inpatients-in-a-network-constrained-urban-system-wang-and-ke-2019" class="level4">
<h4 class="anchored" data-anchor-id="measuring-spatial-patterns-of-health-care-facilities-and-their-relationships-with-hypertension-inpatients-in-a-network-constrained-urban-system-wang-and-ke-2019">3. Measuring Spatial Patterns of Health Care Facilities and Their Relationships with Hypertension Inpatients in a Network-Constrained Urban System (<a href="https://www.mdpi.com/1660-4601/16/17/3204">Wang and Ke, 2019</a>)</h4>
<p>This study applied point pattern analysis (PPA) to investigate the spatial distribution of health care facilities in Shenzhen, China. Traditional PPA methods assume that spatial events are randomly located on a plane, but this is not appropriate for network-constrained events, such as those that occur on urban road networks. Therefore, the study used network-based analysis methods, such as network Kernel density estimation and network K-function.</p>
<section id="how-does-it-link-to-our-project-2" class="level5">
<h5 class="anchored" data-anchor-id="how-does-it-link-to-our-project-2">How does it link to our project?</h5>
<p>We plan to utilise the netKDE techniques employed in the article to estimate the density of events, such as the density of HDB locations, within a network-constrained environment. The purpose of using netKDE for HDB locations is to identify areas of high or low concentration of HDB units based on their proximity to the road network. With this analysis, HDB buyers can understand the density of HDB units in different regions of Singapore by identifying regions with a high concentration of HDB units, which may be indicative of a high demand for housing in those areas.</p>
</section>
</section>
</section>
<section id="application-system-architecture" class="level2">
<h2 class="anchored" data-anchor-id="application-system-architecture">Application System Architecture</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/architecture.PNG" class="img-fluid figure-img" width="699"></p>
<p></p><figcaption class="figure-caption">Figure 9: Application Architecture Design</figcaption><p></p>
</figure>
</div>
</section>
<section id="application-design-overview" class="level2">
<h2 class="anchored" data-anchor-id="application-design-overview">Application Design Overview</h2>
<p>Our Shiny application features a minimalist design, with a clean and modern look achieved through the use of the “minty” bootswatch theme. The layout is simple and intuitive, featuring a navigation bar that provides easy access to various features of the app. Users can explore HDB locations and amenities through a mapping visualization, analyze spatial point patterns with graphs, and even upload their own datasets for further analysis.</p>
<p>To provide a better understanding of our application, below are examples of our application screens. The user guide to our application can be found <a href="./user_guide.html">here</a>.</p>
<ol type="1">
<li><p>Homepage</p>
<p>In this page, it introduces the motivation of our application and the authors.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/homepagedesign.PNG" class="img-fluid figure-img" width="601"></p>
<p></p><figcaption class="figure-caption">Figure 10: Homepage</figcaption><p></p>
</figure>
</div></li>
<li><p>Visualization page</p>
<p>In this page, we can observe the mapping of HDB flats and relevant amenities in Singapore.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mappingdesign.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 11: Mapping of HDB Flats and Relevant Amenities</figcaption><p></p>
</figure>
</div></li>
<li><p>Spatial Point Analysis</p>
<p>In this page, we offer several tools designed to help you analyze the spatial distribution of points in your dataset. Our tools includes the Local Colocation Quotient Analysis (CLQ), Kernel Density Estimation (KDE), F-Function, Ripley L-Function, and Network Constraint Analysis. To access these tools, simply click on the five tabs located at the top of the page. Each tool provides a unique perspective on the spatial patterns in your data, allowing you to gain valuable insights into the underlying processes driving your observations.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/CLQdesign.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 12: Spatial Point Analysis - CLQ Map</figcaption><p></p>
</figure>
</div></li>
<li><p>Data Upload</p>
<p>In this page, users can upload their data of an amenity in rds format and it will be shown as an option under the visualisation page, what would you like to view’s drop down list.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/upload design.PNG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure 13: Upload Dataset Page</figcaption><p></p>
</figure>
</div></li>
</ol>
</section>
<section id="future-work" class="level2">
<h2 class="anchored" data-anchor-id="future-work">Future Work</h2>
<p>To enhance the usefulness of our app, we can integrate hot and cold spot analysis of amenities to identify areas with a high concentration of amenities, known as hot spots, and areas with a low concentration of amenities, known as cold spots. While our current application uses KDE to estimate the density of amenities across an area, hot and cold spot analysis may offer a more intuitive approach to identifying areas with significant clusters of high or low concentrations. By examining the spatial distribution of amenities, we can pinpoint specific areas and provide more targeted information to HDB buyers. This approach may allow us to deliver more actionable insights and help buyers make more informed decisions about their property search.</p>
<p>Currently, our application’s dataset upload function can only upload rds files and is only applicable for visualizations of the map of amenities and HDB locations. To improve the functionality of the app, we can expand the dataset upload function to include other features such as plotting the CLQ maps, KDE, F-function, L-function, and network constraint analysisgraphs. This expansion will allow users to analyze them for deeper insights. Moreover, we can provide additional data pre-processing features to enhance the quality of the dataset uploaded by the user. This ensures that the data is effectively utilized to gain valuable insights and make informed decisions. By offering these advanced features, our application can provide more accurate and relevant information to users and help them make more informed decisions about their property search.</p>
<p>We can also enhance our app by integrating it with APIs (Application Programming Interfaces) that provide real-time location data for amenities such as supermarkets, shopping malls, and hawkers in Singapore. By doing so, our app can obtain the most up-to-date information on the availability and locations of these amenities. This integration will ensure that the information provided by our application is accurate and reliable, which is essential for making informed decisions.</p>
</section>
<section id="timeline" class="level2">
<h2 class="anchored" data-anchor-id="timeline">Timeline</h2>
<p><img src="img/timeline.PNG" class="img-fluid" width="735"></p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>Spatial First Point Analysis (<a href="https://r4gdsa.netlify.app/chap04.html">link</a>)</p>
<p>Spatial Second Point Analysis (<a href="https://r4gdsa.netlify.app/chap05.html">link</a>)</p>
<p>CLQ Interpretation (<a href="https://pro.arcgis.com/en/pro-app/latest/tool-reference/spatial-statistics/learnmorecolocationanalysis.htm">link</a>)</p>
<p>Network Constrained Spatial Point Patterns Analysis (<a href="https://r4gdsa.netlify.app/chap07.html">link</a>)</p>
<p>Senior’s Interactive L-function code (<a href="https://rpubs.com/deniseadele/secondorder_pointpattern">link</a>)</p>
<p>Shiny Documentation (<a href="https://shiny.rstudio.com/">link</a>)</p>
<p>Literature review No.1 (<a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-020-3494-x">link</a>)</p>
<p>Literature review No.2 (<a href="https://link.springer.com/article/10.1186/s12913-023-09051-0">link</a>)</p>
<p>Literature review No.3 (<a href="https://www.mdpi.com/1660-4601/16/17/3204">link</a>)</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>